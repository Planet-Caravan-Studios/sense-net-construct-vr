---
//const currentUrl = window.location.href;
const {link} = Astro.props;
---

<div class="qrcodeElement" data-link={link ? link : "test.com"}></div>

<script type="text/javascript">
	document.addEventListener("DOMContentLoaded", function(){
		//runs code after DOM load
		

		let elements = document.querySelectorAll('.qrcodeElement');
		elements.forEach(element => {

			const link = element.getAttribute("data-link");
			new QRCode(element, link);
		});
	});
</script>